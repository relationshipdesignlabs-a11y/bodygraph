<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Chart Details | Designing Us</title>
<style>
  :root{--bg:#0e1116;--card:#151924;--ink:#e9eef0;--muted:#a8b5bb;--border:#202a34;}
  html,body{margin:0;height:100%}
  body{background:var(--bg);color:var(--ink);font:14px/1.45 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial}
  .wrap{max-width:1200px;margin:0 auto;padding:20px;display:grid;gap:16px}
  .grid{display:grid;grid-template-columns:1fr minmax(560px,720px) 1fr;gap:16px;align-items:start}
  .card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:14px}
  h1{margin:0 0 6px;font-size:18px}
  h2{margin:0 0 8px;font-size:15px;color:#d1dbe0}
  .muted{color:var(--muted)}
  .kv{display:grid;grid-template-columns:120px 1fr;gap:6px 12px}
  .kv b{color:#dfe7ea}
  .graph{display:flex;justify-content:center}
  .graph iframe{width:100%;max-width:720px;aspect-ratio:2/3;border:0;border-radius:10px;overflow:hidden;background:#fff}
  @media(max-width:980px){.grid{grid-template-columns:1fr}}
</style>
</head>
<body>
<div class="wrap">
  <header class="card"><h1>Chart details</h1><div class="muted" id="hdr"></div></header>
  <div class="grid">
    <section class="card"><h2>Basics</h2><div class="kv" id="basics"></div></section>
    <section class="card graph"><iframe id="graph" src="WORKING.html" loading="lazy"></iframe></section>
    <section class="card"><h2>Channels</h2><div id="channels"></div></section>
  </div>
  <footer class="card"><button onclick="history.back()">Back</button></footer>
</div>
<script>
const data=JSON.parse(sessionStorage.getItem('HD_DATA')||'{}');document.getElementById('hdr').textContent=`${sessionStorage.getItem('HD_PLACE')||''} — ${sessionStorage.getItem('HD_DATE')||''} ${sessionStorage.getItem('HD_TIME')||''}`;
const basics=document.getElementById('basics');function put(k,v){const kb=document.createElement('b');kb.textContent=k;const kv=document.createElement('div');kv.textContent=v||'—';basics.append(kb,kv);}put('Type',data?.basics?.type||data?.type);put('Profile',data?.basics?.profile||data?.profile);put('Strategy',data?.basics?.strategy||data?.strategy);put('Authority',data?.basics?.authority||data?.authority);put('Definition',data?.basics?.definition||data?.definition);
const chDiv=document.getElementById('channels');const list=(data?.channels)||(data?.basics?.channels)||[];chDiv.innerHTML=list.map(x=>`<div style="margin:4px 0;opacity:.9">${x.name||x.id||x}</div>`).join('');
const iframe=document.getElementById('graph');function send(){try{iframe.contentWindow.applyBodygraph&&iframe.contentWindow.applyBodygraph(data);}catch(_){}}iframe.addEventListener('load',send);if(iframe.contentWindow&&iframe.contentWindow.applyBodygraph){send();}
</script>
</body>
</html>