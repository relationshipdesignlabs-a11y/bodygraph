<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Human Design — Chart</title>
<style>
  :root{--bg:#0e1116;--card:#141a22;--ink:#e9eef2;--muted:#9fb0b8;--border:#233040}
  html,body{margin:0;height:100%}
  body{background:var(--bg);color:var(--ink);font:14px/1.45 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial}
  .wrap{max-width:1200px;margin:0 auto;padding:20px}
  h1{margin:0 0 12px;font-size:20px}
  .grid{display:grid;grid-template-columns:1fr minmax(560px,720px) 1fr;gap:16px;align-items:start}
  .col{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:12px}
  .colTitle{margin:0 0 6px;font-size:13px;color:#c8d2d6}
  .stack{display:flex;flex-direction:column;gap:8px}
  .pill{display:flex;justify-content:space-between;gap:8px;padding:8px 10px;border-radius:10px;background:#0c1016;border:1px solid #27313a}
  .pill b{color:#dfe7ea}
  .center{display:flex;flex-direction:column;align-items:center}
  iframe{width:100%;max-width:720px;aspect-ratio:2/3;border:0;border-radius:10px;background:#fff}
  .actions{margin-top:10px}
  @media (max-width:980px){.grid{grid-template-columns:1fr}}
</style>
</head>
<body>
<div class="wrap">
  <h1 id="title">Your chart</h1>
  <div class="grid">
    <aside class="col"><div class="colTitle">Design</div><div id="design" class="stack"></div></aside>
    <main class="col center">
      <iframe id="view" src="renderer.html" loading="lazy"></iframe>
      <div class="actions"><button id="details">Chart details</button></div>
    </main>
    <aside class="col"><div class="colTitle">Personality</div><div id="personality" class="stack"></div></aside>
  </div>
</div>
<script>
const meta = JSON.parse(sessionStorage.getItem('HD_META')||'{}');
document.getElementById('title').textContent = meta.name ? meta.name + ' — Chart' : 'Your chart';
document.getElementById('details').onclick = ()=>location.href='details.html';
// If you later compute real activations, render here:
function renderLists(){
  const d=document.getElementById('design'); const p=document.getElementById('personality');
  d.innerHTML=''; p.innerHTML='';
  // Placeholder sample
  ['Sun','Earth','Moon','North Node','South Node'].forEach((name,i)=>{
    const el=document.createElement('div'); el.className='pill';
    el.innerHTML='<b>'+name+'</b><span>Gate '+(i+1)+'.'+((i%6)+1)+'</span>';
    (i%2?d:p).appendChild(el);
  });
}
renderLists();
// Forward chart data to renderer if you have it
const view=document.getElementById('view');
function send(){ try{ view.contentWindow.applyBodygraph && view.contentWindow.applyBodygraph(JSON.parse(sessionStorage.getItem('HD_DATA')||'{}')); }catch(e){} }
view.addEventListener('load', send);
</script>
</body>
</html>
